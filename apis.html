<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>API Documents &mdash; crystalmapping 0.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/plot_directive.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Minimum Version of Python and NumPy" href="min_versions.html" />
    <link rel="prev" title="Use new algorithm to run the batch processing" href="new_algorithm.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> crystalmapping
          </a>
              <div class="version">
                0.0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="experiment.html">Run experiments at NSLS-II</a></li>
<li class="toctree-l1"><a class="reference internal" href="old_algorithm.html">Use the old peak tracking algorithm in streaming data processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="new_algorithm.html">Use new algorithm to run the batch processing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Documents</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-crystalmapping.plans">crystalmapping.plans</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-crystalmapping.servers">crystalmapping.servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-crystalmapping.utils">crystalmapping.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-crystalmapping.callbacks">crystalmapping.callbacks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="min_versions.html">Minimum Version of Python and NumPy</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">crystalmapping</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>API Documents</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/apis.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="api-documents">
<h1>API Documents<a class="headerlink" href="#api-documents" title="Permalink to this heading">¶</a></h1>
<section id="module-crystalmapping.plans">
<span id="crystalmapping-plans"></span><h2>crystalmapping.plans<a class="headerlink" href="#module-crystalmapping.plans" title="Permalink to this heading">¶</a></h2>
<dl class="py exception">
<dt class="sig sig-object py" id="crystalmapping.plans.TomoPlanError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">crystalmapping.plans.</span></span><span class="sig-name descname"><span class="pre">TomoPlanError</span></span><a class="reference internal" href="_modules/crystalmapping/plans.html#TomoPlanError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.plans.TomoPlanError" title="Permalink to this definition">¶</a></dt>
<dd><p>Error in the plans.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="crystalmapping.plans.configure_area_det">
<span class="sig-prename descclassname"><span class="pre">crystalmapping.plans.</span></span><span class="sig-name descname"><span class="pre">configure_area_det</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">detector</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exposure</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acq_time</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/plans.html#configure_area_det"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.plans.configure_area_det" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure exposure time of a detector in continuous acquisition mode.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="crystalmapping.plans.dark_plan">
<span class="sig-prename descclassname"><span class="pre">crystalmapping.plans.</span></span><span class="sig-name descname"><span class="pre">dark_plan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">detector</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/plans.html#dark_plan"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.plans.dark_plan" title="Permalink to this definition">¶</a></dt>
<dd><p>Take a dark scan in “dark” stream.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="crystalmapping.plans.fly_scan_nd">
<span class="sig-prename descclassname"><span class="pre">crystalmapping.plans.</span></span><span class="sig-name descname"><span class="pre">fly_scan_nd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">detectors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><span class="pre">list</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">move_velocity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_per_point</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_per_frame</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><span class="pre">object</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter_open</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter_close</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter_wait_open</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter_wait_close</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">take_dark</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">md</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><span class="pre">dict</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backoff</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">snake</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.10)"><span class="pre">Generator</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/plans.html#fly_scan_nd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.plans.fly_scan_nd" title="Permalink to this definition">¶</a></dt>
<dd><p>Move on a grid and do a fly scan at each point in the grid.</p>
<p>For example, <cite>fly_scan_nd([detector], motor_y, 0, 10, 11,
motor_x, 0, 20, 21, motor_fly, 0, 5, 6,
time_per_point=10, time_per_frame=1, shutter=shutter,
shutter_open=1, shutter_close=0,
shutter_wait_open=2, shutter_wait_close=5,
move_velocity=5, take_dark=True,
md={“task”: “fly scan sample 1”, backoff=0.5, snake=False})</cite>
means that set detector so that it will collect one image for 10 s
one image contains 10 frames and each frame for 1 s</p>
<p>for y in 0, 1, 2, …, 10:
for x in 0, 1, 2, …, 20:
move to (x, y)
wait 5 s
collect dark image during the movement
open shutter
wait 2 s
fly scan the motor_fly from -0.5 to 5.5
collect 6 images during the fly
close shutter</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>detectors</strong><span class="classifier">list</span></dt><dd><p>A list of detectors. The first one must be an area detector. The list shouldn’t include the motors in the
<cite>args</cite>.</p>
</dd>
<dt><strong>*args</strong></dt><dd><dl class="simple">
<dt>patterned like (<code class="docutils literal notranslate"><span class="pre">motor1,</span> <span class="pre">start1,</span> <span class="pre">stop1,</span> <span class="pre">num1,</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">motor2,</span> <span class="pre">start2,</span> <span class="pre">stop2,</span> <span class="pre">num2,</span></code>
<code class="docutils literal notranslate"><span class="pre">motor3,</span> <span class="pre">start3,</span> <span class="pre">stop3,</span> <span class="pre">num3,</span></code> …
<code class="docutils literal notranslate"><span class="pre">motorN,</span> <span class="pre">startN,</span> <span class="pre">stopN,</span> <span class="pre">numN</span></code>)</p>
</dd>
</dl>
<p>The first motor is the “slowest”, the outer loop. The last motor
is the “fly” motor, the non-stoping scan along an axis. For all motors
except the first motor, there is a “snake” argument: a boolean
indicating whether to following snake-like, winding trajectory or a
simple left-to-right trajectory.</p>
</dd>
<dt><strong>move_velocity</strong><span class="classifier">float</span></dt><dd><p>The speed for the motors to move to the next grid point.</p>
</dd>
<dt><strong>time_per_point</strong><span class="classifier">float</span></dt><dd><p>The time to collect one image at one point.</p>
</dd>
<dt><strong>time_per_frame</strong><span class="classifier">float</span></dt><dd><p>The time to collect one frame in a image. One image contains serveral frames.</p>
</dd>
<dt><strong>shutter</strong><span class="classifier">object</span></dt><dd><p>The fast shutter.</p>
</dd>
<dt><strong>shutter_open</strong><span class="classifier">typing.Any</span></dt><dd><p>The value of the shutter in open state.</p>
</dd>
<dt><strong>shutter_close</strong><span class="classifier">typing.Any</span></dt><dd><p>The value of the shutter in close state.</p>
</dd>
<dt><strong>shutter_wait_open</strong><span class="classifier">float, optional</span></dt><dd><p>The time between the shutter open and the start of the light image collection, by default 0.</p>
</dd>
<dt><strong>shutter_wait_close</strong><span class="classifier">float, optional</span></dt><dd><p>The time between the shutter close and the start of the dark image collection, by default 0.</p>
</dd>
<dt><strong>take_dark</strong><span class="classifier">bool, optional</span></dt><dd><p>If true, take a dark image at the end of the fly scan, by default True</p>
</dd>
<dt><strong>md</strong><span class="classifier">dict, optional</span></dt><dd><p>The dictionary of the metadata to added into the plan, by default None</p>
</dd>
<dt><strong>backoff</strong><span class="classifier">float, optional</span></dt><dd><p>If non-zero, fly scan from start - backoff to end + backoff, by default 0.</p>
</dd>
<dt><strong>snake</strong><span class="classifier">bool, optional</span></dt><dd><p>If true, snake the axis of the fly scan, by default False</p>
</dd>
</dl>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><dl class="simple">
<dt>Iterator[typing.Generic]</dt><dd><p>The messages of the plan.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><dl class="simple">
<dt>TomoPlanError</dt><dd><p>Empty detector list.</p>
</dd>
<dt>TomoPlanError</dt><dd><p>Not enough motors.</p>
</dd>
<dt>TomoPlanError</dt><dd><p>Wrong motor positions format.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="crystalmapping.plans.fly_scan_nd_no_shutter">
<span class="sig-prename descclassname"><span class="pre">crystalmapping.plans.</span></span><span class="sig-name descname"><span class="pre">fly_scan_nd_no_shutter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">detectors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><span class="pre">list</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">move_velocity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_per_point</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_per_frame</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><span class="pre">object</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter_open</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter_close</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter_wait_open</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter_wait_close</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">take_dark</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">md</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><span class="pre">dict</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">backoff</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">snake</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.10)"><span class="pre">Generator</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/plans.html#fly_scan_nd_no_shutter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.plans.fly_scan_nd_no_shutter" title="Permalink to this definition">¶</a></dt>
<dd><p>Move on a grid and do a fly scan at each point in the grid.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>detectors</strong><span class="classifier">list</span></dt><dd><p>A list of detectors. The first one must be an area detector. The list shouldn’t include the motors in the
<cite>args</cite>.</p>
</dd>
<dt><strong>*args</strong></dt><dd><dl class="simple">
<dt>patterned like (<code class="docutils literal notranslate"><span class="pre">motor1,</span> <span class="pre">start1,</span> <span class="pre">stop1,</span> <span class="pre">num1,</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">motor2,</span> <span class="pre">start2,</span> <span class="pre">stop2,</span> <span class="pre">num2,</span></code>
<code class="docutils literal notranslate"><span class="pre">motor3,</span> <span class="pre">start3,</span> <span class="pre">stop3,</span> <span class="pre">num3,</span></code> …
<code class="docutils literal notranslate"><span class="pre">motorN,</span> <span class="pre">startN,</span> <span class="pre">stopN,</span> <span class="pre">numN</span></code>)</p>
</dd>
</dl>
<p>The first motor is the “slowest”, the outer loop. The last motor
is the “fly” motor, the non-stoping scan along an axis. For all motors
except the first motor, there is a “snake” argument: a boolean
indicating whether to following snake-like, winding trajectory or a
simple left-to-right trajectory.</p>
</dd>
<dt><strong>move_velocity</strong><span class="classifier">float</span></dt><dd><p>The speed for the motors to move to the next grid point.</p>
</dd>
<dt><strong>time_per_point</strong><span class="classifier">float</span></dt><dd><p>The time to collect one image at one point.</p>
</dd>
<dt><strong>time_per_frame</strong><span class="classifier">float</span></dt><dd><p>The time to collect one frame in a image. One image contains serveral frames.</p>
</dd>
<dt><strong>shutter</strong><span class="classifier">object</span></dt><dd><p>The fast shutter.</p>
</dd>
<dt><strong>shutter_open</strong><span class="classifier">typing.Any</span></dt><dd><p>The value of the shutter in open state.</p>
</dd>
<dt><strong>shutter_close</strong><span class="classifier">typing.Any</span></dt><dd><p>The value of the shutter in close state.</p>
</dd>
<dt><strong>shutter_wait_open</strong><span class="classifier">float, optional</span></dt><dd><p>The time between the shutter open and the start of the light image collection, by default 0.</p>
</dd>
<dt><strong>shutter_wait_close</strong><span class="classifier">float, optional</span></dt><dd><p>The time between the shutter close and the start of the dark image collection, by default 0.</p>
</dd>
<dt><strong>take_dark</strong><span class="classifier">bool, optional</span></dt><dd><p>If true, take a dark image at the end of the fly scan, by default True</p>
</dd>
<dt><strong>md</strong><span class="classifier">dict, optional</span></dt><dd><p>The dictionary of the metadata to added into the plan, by default None</p>
</dd>
<dt><strong>backoff</strong><span class="classifier">float, optional</span></dt><dd><p>If non-zero, fly scan from start - backoff to end + backoff, by default 0.</p>
</dd>
<dt><strong>snake</strong><span class="classifier">bool, optional</span></dt><dd><p>If true, snake the axis of the fly scan, by default False</p>
</dd>
</dl>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><dl class="simple">
<dt>Iterator[typing.Generic]</dt><dd><p>The messages of the plan.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><dl class="simple">
<dt>TomoPlanError</dt><dd><p>Empty detector list.</p>
</dd>
<dt>TomoPlanError</dt><dd><p>Not enough motors.</p>
</dd>
<dt>TomoPlanError</dt><dd><p>Wrong motor positions format.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="crystalmapping.plans.grid_scan_nd">
<span class="sig-prename descclassname"><span class="pre">crystalmapping.plans.</span></span><span class="sig-name descname"><span class="pre">grid_scan_nd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">detectors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><span class="pre">list</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">snake</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><span class="pre">list</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_per_point</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_per_frame</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><span class="pre">object</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter_open</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter_close</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter_wait_open</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter_wait_close</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">take_dark</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">md</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.10)"><span class="pre">Generator</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/plans.html#grid_scan_nd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.plans.grid_scan_nd" title="Permalink to this definition">¶</a></dt>
<dd><p>Scan over a mesh; each motor is on an independent trajectory.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>detectors</strong><span class="classifier">list</span></dt><dd><p>A list of ‘readable’ objects</p>
</dd>
<dt><strong>*args</strong></dt><dd><dl class="simple">
<dt>patterned like (<code class="docutils literal notranslate"><span class="pre">motor1,</span> <span class="pre">start1,</span> <span class="pre">stop1,</span> <span class="pre">num1,</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">motor2,</span> <span class="pre">start2,</span> <span class="pre">stop2,</span> <span class="pre">num2,</span></code>
<code class="docutils literal notranslate"><span class="pre">motor3,</span> <span class="pre">start3,</span> <span class="pre">stop3,</span> <span class="pre">num3,</span></code> …
<code class="docutils literal notranslate"><span class="pre">motorN,</span> <span class="pre">startN,</span> <span class="pre">stopN,</span> <span class="pre">numN</span></code>)</p>
</dd>
</dl>
<p>The first motor is the “slowest”, the outer loop. The last motor
is the “fly” motor, the non-stoping scan along an axis. For all motors
except the first motor, there is a “snake” argument: a boolean
indicating whether to following snake-like, winding trajectory or a
simple left-to-right trajectory.</p>
</dd>
<dt><strong>snake</strong><span class="classifier">bool, optional</span></dt><dd><p>If true, snake the axis of the fly scan, by default None</p>
</dd>
<dt><strong>time_per_point</strong><span class="classifier">float</span></dt><dd><p>The time to collect one image at one point.</p>
</dd>
<dt><strong>time_per_frame</strong><span class="classifier">float</span></dt><dd><p>The time to collect one frame in a image. One image contains serveral frames.</p>
</dd>
<dt><strong>time_per_point</strong><span class="classifier">float</span></dt><dd><p>The time to collect one image at one point.</p>
</dd>
<dt><strong>time_per_frame</strong><span class="classifier">float</span></dt><dd><p>The time to collect one frame in a image. One image contains serveral frames.</p>
</dd>
<dt><strong>shutter</strong><span class="classifier">object</span></dt><dd><p>The fast shutter.</p>
</dd>
<dt><strong>shutter_open</strong><span class="classifier">typing.Any</span></dt><dd><p>The value of the shutter in open state.</p>
</dd>
<dt><strong>shutter_close</strong><span class="classifier">typing.Any</span></dt><dd><p>The value of the shutter in close state.</p>
</dd>
<dt><strong>shutter_wait_open</strong><span class="classifier">float, optional</span></dt><dd><p>The time between the shutter open and the start of the light image collection, by default 0.</p>
</dd>
<dt><strong>shutter_wait_close</strong><span class="classifier">float, optional</span></dt><dd><p>The time between the shutter close and the start of the dark image collection, by default 0.</p>
</dd>
<dt><strong>take_dark</strong><span class="classifier">bool, optional</span></dt><dd><p>If true, take a dark image at the end of the fly scan, by default True</p>
</dd>
<dt><strong>md</strong><span class="classifier">[type], optional</span></dt><dd><p>The dictionary of the metadata to added into the plan, by default None, by default None</p>
</dd>
</dl>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><dl class="simple">
<dt>Iterator[typing.Generic]</dt><dd><p>The messages of the plan.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><dl class="simple">
<dt>TomoPlanError</dt><dd><p>Empty detector list.</p>
</dd>
<dt>TomoPlanError</dt><dd><p>Not enough motors.</p>
</dd>
<dt>TomoPlanError</dt><dd><p>Wrong motor positions format.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="crystalmapping.plans.grid_scan_optional_dark">
<span class="sig-prename descclassname"><span class="pre">crystalmapping.plans.</span></span><span class="sig-name descname"><span class="pre">grid_scan_optional_dark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">detectors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><span class="pre">list</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">snake</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><span class="pre">list</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_per_point</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_per_frame</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><span class="pre">object</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter_open</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter_close</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">shutter_wait</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">md</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.10)"><span class="pre">Generator</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/plans.html#grid_scan_optional_dark"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.plans.grid_scan_optional_dark" title="Permalink to this definition">¶</a></dt>
<dd><p>Scan over a mesh; each motor is on an independent trajectory.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl>
<dt><strong>detectors</strong><span class="classifier">list</span></dt><dd><p>A list of ‘readable’ objects</p>
</dd>
<dt><strong>*args</strong></dt><dd><dl class="simple">
<dt>patterned like (<code class="docutils literal notranslate"><span class="pre">motor1,</span> <span class="pre">start1,</span> <span class="pre">stop1,</span> <span class="pre">num1,</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">motor2,</span> <span class="pre">start2,</span> <span class="pre">stop2,</span> <span class="pre">num2,</span></code>
<code class="docutils literal notranslate"><span class="pre">motor3,</span> <span class="pre">start3,</span> <span class="pre">stop3,</span> <span class="pre">num3,</span></code> …
<code class="docutils literal notranslate"><span class="pre">motorN,</span> <span class="pre">startN,</span> <span class="pre">stopN,</span> <span class="pre">numN</span></code>)</p>
</dd>
</dl>
<p>The first motor is the “slowest”, the outer loop. The last motor
is the “fly” motor, the non-stoping scan along an axis. For all motors
except the first motor, there is a “snake” argument: a boolean
indicating whether to following snake-like, winding trajectory or a
simple left-to-right trajectory.</p>
</dd>
<dt><strong>snake</strong><span class="classifier">bool, optional</span></dt><dd><p>If true, snake the axis of the fly scan, by default None</p>
</dd>
<dt><strong>time_per_point</strong><span class="classifier">float</span></dt><dd><p>The time to collect one image at one point.</p>
</dd>
<dt><strong>time_per_frame</strong><span class="classifier">float</span></dt><dd><p>The time to collect one frame in a image. One image contains serveral frames.</p>
</dd>
<dt><strong>time_per_point</strong><span class="classifier">float</span></dt><dd><p>The time to collect one image at one point.</p>
</dd>
<dt><strong>time_per_frame</strong><span class="classifier">float</span></dt><dd><p>The time to collect one frame in a image. One image contains serveral frames.</p>
</dd>
<dt><strong>shutter</strong><span class="classifier">object</span></dt><dd><p>The fast shutter.</p>
</dd>
<dt><strong>shutter_open</strong><span class="classifier">typing.Any</span></dt><dd><p>The value of the shutter in open state.</p>
</dd>
<dt><strong>shutter_close</strong><span class="classifier">typing.Any</span></dt><dd><p>The value of the shutter in close state.</p>
</dd>
<dt><strong>shutter_wait</strong><span class="classifier">float, optional</span></dt><dd><p>The time between the shutter open and close, by default 0.</p>
</dd>
<dt><strong>md</strong><span class="classifier">[type], optional</span></dt><dd><p>The dictionary of the metadata to added into the plan, by default None, by default None</p>
</dd>
</dl>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><dl class="simple">
<dt>Iterator[typing.Generic]</dt><dd><p>The messages of the plan.</p>
</dd>
</dl>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><dl class="simple">
<dt>TomoPlanError</dt><dd><p>Empty detector list.</p>
</dd>
<dt>TomoPlanError</dt><dd><p>Not enough motors.</p>
</dd>
<dt>TomoPlanError</dt><dd><p>Wrong motor positions format.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="crystalmapping.plans.loop_forever">
<span class="sig-prename descclassname"><span class="pre">crystalmapping.plans.</span></span><span class="sig-name descname"><span class="pre">loop_forever</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">motor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Device</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">left</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">right</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.10)"><span class="pre">Generator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/crystalmapping/plans.html#loop_forever"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.plans.loop_forever" title="Permalink to this definition">¶</a></dt>
<dd><p>Move motor from left to right and right to left repeatedly until t seconds pass</p>
</dd></dl>

</section>
<section id="module-crystalmapping.servers">
<span id="crystalmapping-servers"></span><h2>crystalmapping.servers<a class="headerlink" href="#module-crystalmapping.servers" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="crystalmapping.servers.Commands">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">crystalmapping.servers.</span></span><span class="sig-name descname"><span class="pre">Commands</span></span><a class="reference internal" href="_modules/crystalmapping/servers.html#Commands"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.servers.Commands" title="Permalink to this definition">¶</a></dt>
<dd><p>A collection of commands.</p>
<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.servers.Commands.create_best_effort_config">
<span class="sig-name descname"><span class="pre">create_best_effort_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfg_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/servers.html#Commands.create_best_effort_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.servers.Commands.create_best_effort_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the configuration file for best efforts server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>cfg_file</strong><span class="classifier">str</span></dt><dd><p>The configuration file. It is an .ini file.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.servers.Commands.create_extremum_config">
<span class="sig-name descname"><span class="pre">create_extremum_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfg_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/servers.html#Commands.create_extremum_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.servers.Commands.create_extremum_config" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the configuration file for extremum server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>cfg_file</strong><span class="classifier">str</span></dt><dd><p>The configuration file. It is an .ini file.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.servers.Commands.run_best_effort">
<span class="sig-name descname"><span class="pre">run_best_effort</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfg_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">test</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/servers.html#Commands.run_best_effort"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.servers.Commands.run_best_effort" title="Permalink to this definition">¶</a></dt>
<dd><p>Run best effort server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>cfg_file</strong><span class="classifier">str</span></dt><dd><p>The configuration file. It is an .ini file.</p>
</dd>
<dt><strong>test</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, it is a pytest mode, by default False.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.servers.Commands.run_extremum">
<span class="sig-name descname"><span class="pre">run_extremum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfg_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">test</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/servers.html#Commands.run_extremum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.servers.Commands.run_extremum" title="Permalink to this definition">¶</a></dt>
<dd><p>Run extremum server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>cfg_file</strong><span class="classifier">str</span></dt><dd><p>The configuration file. It is an .ini file.</p>
</dd>
<dt><strong>test</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, it is a pytest mode, by default False.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="crystalmapping.servers.Extremum">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">crystalmapping.servers.</span></span><span class="sig-name descname"><span class="pre">Extremum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ExtremumConfig</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/servers.html#Extremum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.servers.Extremum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>
<section id="module-crystalmapping.utils">
<span id="crystalmapping-utils"></span><h2>crystalmapping.utils<a class="headerlink" href="#module-crystalmapping.utils" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">crystalmapping.utils.</span></span><span class="sig-name descname"><span class="pre">CrystalMapper</span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper" title="Permalink to this definition">¶</a></dt>
<dd><p>The Calculator of the crystal maps.</p>
<p>Each of the attribute can be the calculated output and the input for the next step of calculation.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>frames_arr</strong><span class="classifier">DataArray</span></dt><dd><p>A data array of diffraction data. It is assumed to be a (N, F, Y, X) shape array, where N is the number
of exposure, F is the number of the frames in one exposure, the Y is the number of pixels in vertical,
X is the number of pixels in horizontal. It can also be (N, Y, X) shape array if there is only one
frame in each exposure.</p>
</dd>
<dt><strong>dark</strong><span class="classifier">ndarray</span></dt><dd><p>The minimum values on the pixels in whole series of exposures. It is assumed to be the background.</p>
</dd>
<dt><strong>light: ndarray</strong></dt><dd><p>The maximum values on the pixels in the whole series of exposures. It is assumed to be a image of all
the Bragg peaks on the background.</p>
</dd>
<dt><strong>peaks: DataFrame</strong></dt><dd><p>A dataframe records all the peak positions.</p>
</dd>
<dt><strong>windows: DataFrame</strong></dt><dd><p>A dataframe records all the center positions and half width of the windows.</p>
</dd>
<dt><strong>intensity: ndarray</strong></dt><dd><p>The array of the average intensity in each of the windows in the series of exposures. It has the shape (
W, dim_0, dim_1, …). The W is the number of the windows and the dim_i is the length of the dimension
i in the grid scan.</p>
</dd>
<dt><strong>bkg_intensity</strong><span class="classifier">ndarray</span></dt><dd><p>The integrated background intensity in the windows.</p>
</dd>
<dt><strong>coords</strong><span class="classifier">ndarray</span></dt><dd><p>The coordinates of the dim_0, dim_1, … in grid scan.</p>
</dd>
<dt><strong>metadata</strong><span class="classifier">dict</span></dt><dd><p>The dictionary to record the metadata. There are two important keys: shape, extents. The shape is the
number of points in each dimension in the grid scan. It should be a array like (dim_0, dim_1, …). The
extents are the start and end value for each dimension. It should be array like [(start0, end0),
(start1, end1), …]. These two keys are used to calculate the coordinates.</p>
</dd>
<dt><strong>ai</strong><span class="classifier">AzimuthalIntegrator</span></dt><dd><p>The class to hold the data of the geometry of the experiments. It is used to index the Q values for each
window.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.assign_q_values">
<span class="sig-name descname"><span class="pre">assign_q_values</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.assign_q_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.assign_q_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign the values to the windows dataframe.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.auto_process">
<span class="sig-name descname"><span class="pre">auto_process</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_wins</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wins_width</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kernel_radius</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#slice" title="(in Python v3.10)"><span class="pre">slice</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dspacing_tolerance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.auto_process"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.auto_process" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically process the data in the standard protocol.</p>
<p>The calculation results are saved in attributes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>num_wins</strong><span class="classifier">int</span></dt><dd><p>The number of windows.</p>
</dd>
<dt><strong>wins_width</strong><span class="classifier">int</span></dt><dd><p>The half width of the windows in pixels.</p>
</dd>
<dt><strong>kernel_radius</strong><span class="classifier">int</span></dt><dd><p>The radius of the kernel to use in peak finding in pixels. It must be an odd integer.</p>
</dd>
<dt><strong>index_filter</strong><span class="classifier">slice</span></dt><dd><p>The index slice of the data to use in the calculation of the dark and light image..</p>
</dd>
<dt><strong>dspacing_tolerance</strong><span class="classifier">tuple</span></dt><dd><p>The tolerance to find the d-spacing for ech peak. It is the ratio between the expected and real.</p>
</dd>
<dt><strong>kwargs</strong></dt><dd><p>The keyword arguments of the peak finding function <cite>trackpy.locate</cite>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>None.</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.auto_visualize">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">auto_visualize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'intensity'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">invert_y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">FacetGrid</span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.auto_visualize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.auto_visualize" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically plot the intensity array in the dataset.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.calc_coords">
<span class="sig-name descname"><span class="pre">calc_coords</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.calc_coords"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.calc_coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the coordinates.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.calc_dark_and_light_from_frames_arr">
<span class="sig-name descname"><span class="pre">calc_dark_and_light_from_frames_arr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#slice" title="(in Python v3.10)"><span class="pre">slice</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.calc_dark_and_light_from_frames_arr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.calc_dark_and_light_from_frames_arr" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the light and dark frame in a series of frames.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.calc_hkls">
<span class="sig-name descname"><span class="pre">calc_hkls</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">two_theta_tolerance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.calc_hkls"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.calc_hkls" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the losest d spacing for each peak and record its index. Use the dspacing to find possible hkls.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>None. The results are saved in self.windows.</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.calc_hkls_in_a_range">
<span class="sig-name descname"><span class="pre">calc_hkls_in_a_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lb</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">rb</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.calc_hkls_in_a_range"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.calc_hkls_in_a_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the hkl in a range of Q value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.calc_hkls_lower_and_upper">
<span class="sig-name descname"><span class="pre">calc_hkls_lower_and_upper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">two_theta_tolerance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.calc_hkls_lower_and_upper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.calc_hkls_lower_and_upper" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate hkls and assign them to the peaks.</p>
<p>Find the upper and lower bound of the Q for each Q value in the dataframe. The hkls that have the upper
and lower bound values are the possible hkls for that peak. The index of the Q value is the index of the
group of possible hkls. The index is recorded in the dataframe for both upper and lower bound.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.calc_intensity_in_windows">
<span class="sig-name descname"><span class="pre">calc_intensity_in_windows</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.calc_intensity_in_windows"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.calc_intensity_in_windows" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the intensity array as a function of index of frames.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.calc_peaks_from_dk_sub_frame">
<span class="sig-name descname"><span class="pre">calc_peaks_from_dk_sub_frame</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">radius</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><span class="pre">tuple</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.calc_peaks_from_dk_sub_frame"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.calc_peaks_from_dk_sub_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the Bragg peaks on the light frame.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.calc_windows_from_peaks">
<span class="sig-name descname"><span class="pre">calc_windows_from_peaks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_num</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.calc_windows_from_peaks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.calc_windows_from_peaks" title="Permalink to this definition">¶</a></dt>
<dd><p>Gte the windows for the most brightest Bragg peaks.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.coords_to_dict">
<span class="sig-name descname"><span class="pre">coords_to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><span class="pre">dict</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.coords_to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.coords_to_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the coordinates to dictionary.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.dark_to_xarray">
<span class="sig-name descname"><span class="pre">dark_to_xarray</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataArray</span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.dark_to_xarray"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.dark_to_xarray" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the dark image to DataArray.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.get_frame">
<span class="sig-name descname"><span class="pre">get_frame</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataArray</span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.get_frame"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.get_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the frame of at the index.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.index_peaks">
<span class="sig-name descname"><span class="pre">index_peaks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">peak1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">peak2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">others</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.10)"><span class="pre">Generator</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Dataset</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.index_peaks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.index_peaks" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the hkls of two peaks to calculate U matrixs and use them to index other peaks. Return the hkls.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>peak1</strong></dt><dd></dd>
<dt><strong>peak2</strong></dt><dd></dd>
<dt><strong>others</strong></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"></dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.index_peaks_in_one_grain">
<span class="sig-name descname"><span class="pre">index_peaks_in_one_grain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">peaks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.10)"><span class="pre">Generator</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Dataset</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.index_peaks_in_one_grain"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.index_peaks_in_one_grain" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the two peaks that have the smallest difference between the measured dspacings and those in
structure. Use the hkls of two peaks to calculate U matrixs and use them to index other peaks.
Return the hkls.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>peaks</strong></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"></dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.index_peaks_in_one_grain2">
<span class="sig-name descname"><span class="pre">index_peaks_in_one_grain2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">peaks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">first_n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">index_all</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dataset</span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.index_peaks_in_one_grain2"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.index_peaks_in_one_grain2" title="Permalink to this definition">¶</a></dt>
<dd><p>Guess the index of the peaks in one grain.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>peaks</strong><span class="classifier">typing.List[int]</span></dt><dd><p>The index of the peaks in the table.</p>
</dd>
<dt><strong>first_n</strong><span class="classifier">int</span></dt><dd><p>The number of the best guess to record for each combination of peaks.</p>
</dd>
<dt><strong>index_all</strong><span class="classifier">bool, optional</span></dt><dd><p>If True, index all the peaks dataset. Else, index only the input peaks from one grain. by default False</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>A xarray dataset contain the guess. It contains candidate, peaks and hkls dimensions. The candidate is one possible guess. The peaks are rows of all hkls. And the hkls are the h, k and l index in that row.</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.intensity_to_xarray">
<span class="sig-name descname"><span class="pre">intensity_to_xarray</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataArray</span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.intensity_to_xarray"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.intensity_to_xarray" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the intensity array to DataArray</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.light_to_xarray">
<span class="sig-name descname"><span class="pre">light_to_xarray</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataArray</span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.light_to_xarray"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.light_to_xarray" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the light image to DataArray</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.load_structure">
<span class="sig-name descname"><span class="pre">load_structure</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cif_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.load_structure"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.load_structure" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the structure of the sample. The <cite>cell</cite> and <cite>ubmatrix.lattice</cite> will be loaded.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.print_indexing_result">
<span class="sig-name descname"><span class="pre">print_indexing_result</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.print_indexing_result"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.print_indexing_result" title="Permalink to this definition">¶</a></dt>
<dd><p>Print out the indexing results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">xr.Dataset</span></dt><dd><p>The data set of returned by the index_peaks_in_one_grain2.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.reshape_intensity">
<span class="sig-name descname"><span class="pre">reshape_intensity</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.reshape_intensity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.reshape_intensity" title="Permalink to this definition">¶</a></dt>
<dd><p>Reshape the intensity array.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.search_two_peaks">
<span class="sig-name descname"><span class="pre">search_two_peaks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">peaks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.search_two_peaks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.search_two_peaks" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the two peaks that have the smallest difference between the measured dspacings and those in
structure. Return their index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>peaks</strong></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"></dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.show_dark">
<span class="sig-name descname"><span class="pre">show_dark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">FacetGrid</span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.show_dark"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.show_dark" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the dark image.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.show_frame">
<span class="sig-name descname"><span class="pre">show_frame</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">FacetGrid</span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.show_frame"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.show_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the frame at that index.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.show_intensity">
<span class="sig-name descname"><span class="pre">show_intensity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">FacetGrid</span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.show_intensity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.show_intensity" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the intensity array.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.show_light">
<span class="sig-name descname"><span class="pre">show_light</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">FacetGrid</span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.show_light"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.show_light" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the light image.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.show_light_sub_dark">
<span class="sig-name descname"><span class="pre">show_light_sub_dark</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">FacetGrid</span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.show_light_sub_dark"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.show_light_sub_dark" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the dark subtracted light image.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.show_peaks">
<span class="sig-name descname"><span class="pre">show_peaks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">peaks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.show_peaks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.show_peaks" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the crystal maps of certain peaks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>peaks</strong><span class="classifier">typing.List[int]</span></dt><dd><p>A list of integer of the peaks.</p>
</dd>
<dt><strong>size: float</strong></dt><dd><p>The size of one cystal map.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.show_windows">
<span class="sig-name descname"><span class="pre">show_windows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">FacetGrid</span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.show_windows"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.show_windows" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the windows on the dark subtracted light image.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.show_windows_on_frame">
<span class="sig-name descname"><span class="pre">show_windows_on_frame</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">FacetGrid</span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.show_windows_on_frame"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.show_windows_on_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the windows on the frame at the index.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.to_dataset">
<span class="sig-name descname"><span class="pre">to_dataset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dataset</span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.to_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.to_dataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the calculation results to DataSet.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapper.windows_to_xarray">
<span class="sig-name descname"><span class="pre">windows_to_xarray</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">DataArray</span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapper.windows_to_xarray"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapper.windows_to_xarray" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the windows DataFrame to xarray.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="crystalmapping.utils.CrystalMapperError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">crystalmapping.utils.</span></span><span class="sig-name descname"><span class="pre">CrystalMapperError</span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#CrystalMapperError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.CrystalMapperError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="crystalmapping.utils.plot_real_aspect">
<span class="sig-prename descclassname"><span class="pre">crystalmapping.utils.</span></span><span class="sig-name descname"><span class="pre">plot_real_aspect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xarr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">DataArray</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.6</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">FacetGrid</span></span></span><a class="reference internal" href="_modules/crystalmapping/utils.html#plot_real_aspect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.utils.plot_real_aspect" title="Permalink to this definition">¶</a></dt>
<dd><p>Visualize two dimensional arr as a color map. The color ranges from median - alpha * std to median +
alpha * std.</p>
</dd></dl>

</section>
<section id="module-crystalmapping.callbacks">
<span id="crystalmapping-callbacks"></span><h2>crystalmapping.callbacks<a class="headerlink" href="#module-crystalmapping.callbacks" title="Permalink to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="crystalmapping.callbacks.DataFrameDumper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">crystalmapping.callbacks.</span></span><span class="sig-name descname"><span class="pre">DataFrameDumper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Broker</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/callbacks.html#DataFrameDumper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.callbacks.DataFrameDumper" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump the dataframe to the database using databroker.</p>
<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.callbacks.DataFrameDumper.dump_df">
<span class="sig-name descname"><span class="pre">dump_df</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.4.3)"><span class="pre">DataFrame</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)"><span class="pre">dict</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/callbacks.html#DataFrameDumper.dump_df"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.callbacks.DataFrameDumper.dump_df" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump the data frame into the database with the metadata.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="crystalmapping.callbacks.ImageProcessor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">crystalmapping.callbacks.</span></span><span class="sig-name descname"><span class="pre">ImageProcessor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">subtrahend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.23)"><span class="pre">ndarray</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/callbacks.html#ImageProcessor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.callbacks.ImageProcessor" title="Permalink to this definition">¶</a></dt>
<dd><p>A callback to average frames of images, subtract it by another image, and emit the document.</p>
<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.callbacks.ImageProcessor.event">
<span class="sig-name descname"><span class="pre">event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">doc</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/callbacks.html#ImageProcessor.event"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.callbacks.ImageProcessor.event" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive an event document from the raw stream.</p>
<p>This should be reimplemented by a subclass.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>doc</strong><span class="classifier">event</span></dt><dd></dd>
<dt><strong>kwargs:</strong></dt><dd><p>All keyword arguments are passed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">process_event()</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.callbacks.ImageProcessor.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">doc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_md</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/callbacks.html#ImageProcessor.start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.callbacks.ImageProcessor.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive a raw start document, re-emit it for the modified stream</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="crystalmapping.callbacks.PeakTracker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">crystalmapping.callbacks.</span></span><span class="sig-name descname"><span class="pre">PeakTracker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">diameter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><span class="pre">tuple</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/callbacks.html#PeakTracker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.callbacks.PeakTracker" title="Permalink to this definition">¶</a></dt>
<dd><p>Track the peaks on a series of images and summarize their position and intensity in a dataframe.</p>
<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.callbacks.PeakTracker.event">
<span class="sig-name descname"><span class="pre">event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">doc</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/callbacks.html#PeakTracker.event"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.callbacks.PeakTracker.event" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive an event document from the raw stream.</p>
<p>This should be reimplemented by a subclass.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>doc</strong><span class="classifier">event</span></dt><dd></dd>
<dt><strong>kwargs:</strong></dt><dd><p>All keyword arguments are passed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">process_event()</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.callbacks.PeakTracker.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">doc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_md</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/callbacks.html#PeakTracker.start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.callbacks.PeakTracker.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive a raw start document, re-emit it for the modified stream</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="crystalmapping.callbacks.TrackLinker">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">crystalmapping.callbacks.</span></span><span class="sig-name descname"><span class="pre">TrackLinker</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Broker</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">search_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><span class="pre">tuple</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/callbacks.html#TrackLinker"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.callbacks.TrackLinker" title="Permalink to this definition">¶</a></dt>
<dd><p>Track the peaks in frame and link them in trajectories.</p>
<p>When a stop is received, the data will be pulled from the databroker and processed. Then, the dataframe will
be emitted row by row.</p>
<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.callbacks.TrackLinker.event">
<span class="sig-name descname"><span class="pre">event</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">doc</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/callbacks.html#TrackLinker.event"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.callbacks.TrackLinker.event" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive an event document from the raw stream.</p>
<p>This should be reimplemented by a subclass.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>doc</strong><span class="classifier">event</span></dt><dd></dd>
<dt><strong>kwargs:</strong></dt><dd><p>All keyword arguments are passed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">process_event()</span></code></p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.callbacks.TrackLinker.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">doc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_md</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/callbacks.html#TrackLinker.start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.callbacks.TrackLinker.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive a raw start document, re-emit it for the modified stream</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crystalmapping.callbacks.TrackLinker.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">doc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">_md</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/crystalmapping/callbacks.html#TrackLinker.stop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.callbacks.TrackLinker.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Receive a raw stop document, re-emit it for the modified stream</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="crystalmapping.callbacks.gen_processed_images">
<span class="sig-prename descclassname"><span class="pre">crystalmapping.callbacks.</span></span><span class="sig-name descname"><span class="pre">gen_processed_images</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">images</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.10)"><span class="pre">Iterable</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><span class="pre">list</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.23)"><span class="pre">ndarray</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subtrahend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><span class="pre">Union</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><span class="pre">list</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.23)"><span class="pre">ndarray</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.10)"><span class="pre">Generator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.23)"><span class="pre">ndarray</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/crystalmapping/callbacks.html#gen_processed_images"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.callbacks.gen_processed_images" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate processed image from a series of images.</p>
<p>The process procedure is (1) turn ot numpy array, (2) average the frames to a two dimensional image, (3)
subtract the image and fill zero in negative pixels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>images</strong></dt><dd><p>A iterable of images. The dimensions of each image is no less than 2.</p>
</dd>
<dt><strong>subtrahend</strong></dt><dd><p>The subtrahend image. The dimensions of each image is no less than 2.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>processed_image</strong><span class="classifier"></span></dt><dd><p>A two dimensional image.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="crystalmapping.callbacks.get_dataframe">
<span class="sig-prename descclassname"><span class="pre">crystalmapping.callbacks.</span></span><span class="sig-name descname"><span class="pre">get_dataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">run</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Header</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v1.4.3)"><span class="pre">DataFrame</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/callbacks.html#get_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.callbacks.get_dataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the dataframe from the stream. Drop the time column.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="crystalmapping.callbacks.get_mean_frame">
<span class="sig-prename descclassname"><span class="pre">crystalmapping.callbacks.</span></span><span class="sig-name descname"><span class="pre">get_mean_frame</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frames</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.23)"><span class="pre">ndarray</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.23)"><span class="pre">ndarray</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/callbacks.html#get_mean_frame"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.callbacks.get_mean_frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Average the frames to a two dimensional image.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="crystalmapping.callbacks.subtract_image">
<span class="sig-prename descclassname"><span class="pre">crystalmapping.callbacks.</span></span><span class="sig-name descname"><span class="pre">subtract_image</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">minuend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.23)"><span class="pre">ndarray</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">subtrahend</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.23)"><span class="pre">ndarray</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.23)"><span class="pre">ndarray</span></a></span></span><a class="reference internal" href="_modules/crystalmapping/callbacks.html#subtract_image"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crystalmapping.callbacks.subtract_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Subtract the image and fill zero in negative pixels.</p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="new_algorithm.html" class="btn btn-neutral float-left" title="Use new algorithm to run the batch processing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="min_versions.html" class="btn btn-neutral float-right" title="Minimum Version of Python and NumPy" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Songsheng Tao.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>